{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"../../../css/header.css\";import logo from\"../../../images/webSiteLogo.png\";import{Link,useLocation,useNavigate}from\"react-router-dom\";import Login from\"../../pages/login\";import Subscribe from\"../../pages/subscribe\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Header(){const[isLoginOverlayOpen,setIsLoginOverlayOpen]=React.useState(false);const[isSubscribeOverlayOpen,setIsSubscribeOverlayOpen]=React.useState(false);const navigate=useNavigate();const location=useLocation();const[username,setUsername]=useState(\"\");const[auth,setAuth]=useState(false);useEffect(()=>{checkAuthStatus();},[]);//questa funzione è quella da copiare per vedere se l'utente è autenticato oppure no\nconst checkAuthStatus=()=>{fetch(\"http://localhost:3000/\",{method:\"GET\",credentials:\"include\"}).then(response=>response.json()).then(data=>{console.log(data);if(data.Status===\"Success\"){setAuth(true);setUsername(data.Username);}else{setAuth(false);console.log(data.Message);}}).catch(error=>{console.error(error);});};const handleLogout=e=>{e.preventDefault();fetch(\"http://localhost:3000/logout\",{method:\"GET\",credentials:\"include\"}).then(response=>response.json()).then(data=>{if(data.Status===\"Success\"){console.log(\"Logout effettuato correttamente\");}else{console.log(\"Errore durante il logout\");}}).catch(error=>{console.error(error);});checkAuthStatus();navigate(\"/\");window.location.reload();};const handleManageAccount=()=>{if(auth){if(username)navigate(`/manageAccount/${username}`);}else console.log(\"Errore\");// in teoria non si dovrebbe mai capitare qui\n};return/*#__PURE__*/_jsx(\"nav\",{className:\"navbar fixed-top navbar-expand-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsxs(Link,{className:\"navbar-brand\",to:\"/\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"logo\",src:logo,className:\"logo-image m-lg-3\"}),\"KnowHow\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"vr\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"collapse navbar-collapse\",id:\"navbarTogglerDemo02\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"navbar-nav me-auto mb-3 mb-lg-0 p-lg-1\",children:[/*#__PURE__*/_jsx(\"li\",{className:`nav-item ${location.pathname==='/'?'active':''}`,children:/*#__PURE__*/_jsx(Link,{className:\"nav-link\",to:\"/\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{className:`nav-item ${location.pathname==='/prezzieobiettivi'?'active':''}`,children:/*#__PURE__*/_jsx(Link,{className:\"nav-link\",to:\"/prezzieobiettivi\",children:\"Prezzi & Obiettivi\"})}),/*#__PURE__*/_jsx(\"li\",{className:`nav-item ${location.pathname==='/requirements'?'active':''}`,children:/*#__PURE__*/_jsx(Link,{className:\"nav-link\",to:\"/requirements\",children:\"Diventare insegnante\"})})]}),auth?/*#__PURE__*/_jsxs(\"div\",{className:\"logout\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"manageAccountBtn\",onClick:handleManageAccount,children:\"Profilo\"}),/*#__PURE__*/_jsx(\"button\",{className:\"logoutBtn\",onClick:handleLogout,children:\"Logout\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"login-subscribe buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"loginBtn\",onClick:()=>setIsLoginOverlayOpen(!isLoginOverlayOpen),children:\"Accedi\"}),/*#__PURE__*/_jsx(\"button\",{className:\"subscribeBtn\",onClick:()=>setIsSubscribeOverlayOpen(!isSubscribeOverlayOpen),children:\"Iscriviti\"}),/*#__PURE__*/_jsx(Login,{isOpen:isLoginOverlayOpen,onClose:()=>{checkAuthStatus();setIsLoginOverlayOpen(!isLoginOverlayOpen);}}),/*#__PURE__*/_jsx(Subscribe,{isOpen:isSubscribeOverlayOpen,onClose:()=>{setIsSubscribeOverlayOpen(!isSubscribeOverlayOpen);}})]})]})]})});}export default Header;","map":{"version":3,"names":["React","useEffect","useState","logo","Link","useLocation","useNavigate","Login","Subscribe","jsx","_jsx","jsxs","_jsxs","Header","isLoginOverlayOpen","setIsLoginOverlayOpen","isSubscribeOverlayOpen","setIsSubscribeOverlayOpen","navigate","location","username","setUsername","auth","setAuth","checkAuthStatus","fetch","method","credentials","then","response","json","data","console","log","Status","Username","Message","catch","error","handleLogout","e","preventDefault","window","reload","handleManageAccount","className","children","to","alt","src","id","pathname","onClick","isOpen","onClose"],"sources":["/Users/matteofranchini/Documents/GitHub/piattaforma_tutoraggio/client/src/components/mainLayout/header/header.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport \"../../../css/header.css\";\nimport logo from \"../../../images/webSiteLogo.png\";\nimport {Link, useLocation, useNavigate} from \"react-router-dom\";\n\nimport Login from \"../../pages/login\";\nimport Subscribe from \"../../pages/subscribe\";\n\nfunction Header (){\n    const [isLoginOverlayOpen, setIsLoginOverlayOpen] = React.useState(false);\n    const [isSubscribeOverlayOpen, setIsSubscribeOverlayOpen] = React.useState(false);\n    const navigate = useNavigate();\n    const location = useLocation();\n    const [username, setUsername] = useState(\"\");\n\n    const [auth, setAuth] = useState(false);\n\n    useEffect(() => {\n        checkAuthStatus()}, []);\n\n    //questa funzione è quella da copiare per vedere se l'utente è autenticato oppure no\n    const checkAuthStatus = () => {\n            fetch(\"http://localhost:3000/\", {\n                method: \"GET\",\n                credentials: \"include\",\n            })\n                .then((response) => response.json())\n                .then((data) => {\n                    console.log(data);\n                    if(data.Status === \"Success\") {\n                        setAuth(true)\n                        setUsername(data.Username)\n                    }\n                    else {\n                        setAuth(false);\n                        console.log(data.Message)\n                    }\n                })\n                .catch((error) => {\n                    console.error(error);\n                });\n        }\n\n    const handleLogout = (e) => {\n        e.preventDefault();\n\n        fetch(\"http://localhost:3000/logout\", {\n            method: \"GET\",\n            credentials: \"include\",\n        })\n            .then((response) => response.json())\n            .then((data) => {\n                if(data.Status === \"Success\") {\n                    console.log(\"Logout effettuato correttamente\");\n                }\n                else {\n                    console.log(\"Errore durante il logout\");\n                }\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n        checkAuthStatus();\n        navigate(\"/\");\n        window.location.reload();\n\n    }\n\n    const handleManageAccount = () =>{\n        if(auth) {\n            if(username)\n                navigate(`/manageAccount/${username}`)\n        }\n        else\n            console.log(\"Errore\") // in teoria non si dovrebbe mai capitare qui\n    }\n\n    return (\n            <nav className=\"navbar fixed-top navbar-expand-lg\">\n                <div className=\"container-fluid\">\n                    <Link className=\"navbar-brand\" to=\"/\">\n                        <img alt=\"logo\" src={logo} className=\"logo-image m-lg-3\"></img>\n                        KnowHow\n                    </Link>\n                    <div className=\"vr\"></div>\n                    <div className=\"collapse navbar-collapse\" id=\"navbarTogglerDemo02\">\n                        <ul className=\"navbar-nav me-auto mb-3 mb-lg-0 p-lg-1\">\n                            <li className={`nav-item ${location.pathname === '/' ? 'active' : ''}`}>\n                                <Link className=\"nav-link\" to=\"/\">Home</Link>\n                            </li>\n                            <li className={`nav-item ${location.pathname === '/prezzieobiettivi' ? 'active' : ''}`}>\n                                <Link className=\"nav-link\" to=\"/prezzieobiettivi\">Prezzi & Obiettivi</Link>\n                            </li>\n                            <li className={`nav-item ${location.pathname === '/requirements' ? 'active' : ''}`}>\n                                <Link className=\"nav-link\" to=\"/requirements\">Diventare insegnante</Link>\n                            </li>\n                        </ul>\n\n                        {\n                            auth ?\n                                <div className=\"logout\">\n                                    <button className=\"manageAccountBtn\"\n                                            onClick={handleManageAccount}>Profilo\n                                    </button>\n                                    <button className=\"logoutBtn\"\n                                            onClick={handleLogout}>Logout\n                                    </button>\n\n                                </div>\n                                :\n                                <div className=\"login-subscribe buttons\">\n                                    <button className=\"loginBtn\"\n                                            onClick={() => setIsLoginOverlayOpen(!isLoginOverlayOpen)}>Accedi\n                                    </button>\n                                    <button className=\"subscribeBtn\"\n                                            onClick={() => setIsSubscribeOverlayOpen(!isSubscribeOverlayOpen)}>Iscriviti\n                                    </button>\n                                    <Login\n                                        isOpen={isLoginOverlayOpen}\n                                        onClose={() => {\n                                            checkAuthStatus();\n                                            setIsLoginOverlayOpen(!isLoginOverlayOpen);\n                                        }}\n                                    />\n                                    <Subscribe\n                                        isOpen={isSubscribeOverlayOpen}\n                                        onClose={() => {\n                                             setIsSubscribeOverlayOpen(!isSubscribeOverlayOpen);\n                                        }}\n                                    />\n                                </div>\n                        }\n                    </div>\n                </div>\n            </nav>\n    );\n}\n\nexport default Header;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}